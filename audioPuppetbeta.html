<!DOCTYPE html>
<html>
<head>
<title>Audio Puppets: Dexin v2</title>
</head>
<style>
body {
background: orange;
}
</style>
<script src="p5.js"></script>
<script src="p5.sound.js"></script>
<script>
var mic;
var imo;

function preload() {
  imo = loadImage('https://i.imgur.com/PYyw1ap.png');
}

function setup() {
  var cnv = createCanvas(400, 500);
  var x = (windowWidth - width) / 2;
  cnv.position(x, 10);

  // Create an Audio input
  mic = new p5.AudioIn();

  // start the Audio Input.
  // By default, it does not .connect() (to the computer speakers)
  mic.start();
}

function draw() {
  background(255,165,0);

  // Get the overall volume (between 0 and 1.0)
  var vol = mic.getLevel();
  fill(152,251,152);
  stroke(0);

  // Draw an ellipse with height based on volume
  var h = map(vol, 0, 1, height, 0);
	if (vol >= 0.020) {
			image(imo, -1200, 0);
	} else if  (vol >= 0.010) {
			image(imo, -800, 0);
	} else if  (vol >= 0.0050) {
			image(imo, -400, 0);
	} else {
			image(imo, 0, 0);
	}
}
</script>
<body>
<div align="center"><br><br><br><br><br>
<b>Dexin the Space Dog</b><br>
powered by audioPuppets<br><br>
<br><br><br>
</div>
</body>
</html>
